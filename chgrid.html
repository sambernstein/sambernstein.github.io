<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tile Grid Game</title>
    <style>
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }
    body {
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .container {
        display: flex;
        flex-wrap: nowrap;
        align-items: center;
        margin-top: 20px;
    }
    .title {
        font-size: 48px;
        font-weight: bold;
        margin: 20px 0;
    }
    .grid-container {
        flex: 0 0 auto;
        display: grid;
        grid-template-columns: repeat(10, 1fr);
        grid-gap: 2px;
        width: 543px;
        margin-right: 30px;
    }
    .tile {
        aspect-ratio: 1;
        width: 100%;
        cursor: pointer;
    }
    .green {
        background-color: green;
    }
    .red {
        background-color: red;
    }
    #message {
        font-size: 28px;
        margin-top: 15px;
        font-weight: bold;
        display: none;
    }
    #new-game-button {
        cursor: pointer;
        font-size: 18px;
        padding: 10px 20px;
        border: 2px solid black;
        background-color: white;
        margin-bottom: 10px;
    }
    #instructions {
        width: 400px;
    }
    #instr-text {
        font-size: 18px;
    }
    #scramble-count {
        font-size: 18px;
        width: 80px;
        height: 30px;
    }

    @media (max-width: 600px) {
        .title {
            font-size: 28px;
            margin: 12px 0 8px;
        }
        .container {
            flex-direction: column;
            align-items: center;
            margin-top: 8px;
            padding: 0 16px;
            width: 100%;
        }
        .grid-container {
            width: calc(100vw - 32px);
            max-width: 400px;
            margin-right: 0;
            margin-bottom: 12px;
        }
        #instructions {
            width: auto;
            padding: 0 4px;
        }
        #instr-text {
            font-size: 14px;
        }
        #instr-text p {
            margin-bottom: 8px;
        }
        #message {
            font-size: 22px;
            margin-top: 8px;
        }
        #new-game-button {
            font-size: 16px;
            padding: 8px 16px;
            margin-bottom: 8px;
        }
        #scramble-count {
            font-size: 16px;
            width: 70px;
            height: 28px;
        }
    }
</style>
</head>
<body>
    <h1 class="title">Turn Them Green</h1>
    <div class="container">
        <div class="grid-container" id="grid-container"></div>
        <div>
            <div id="message">You won!</div>
            <div id="instructions">
                <div id="instr-text">
                    <p>
                        Instructions: The goal of this game is to get all tiles to be green. Do this by clicking on tiles to toggle the color of the 3x3 grid around each tile from red to green or green to red. Clicking "New Game" re-scrambles the board from the solved (all green) state by randomly robo-clicking on as many tiles as you set in the number box.
                        <br><br>
                        Higher numbers in the number box give more difficult and scrambled boards!
                    </p>
                </div>
            </div>
            <button id="new-game-button">New Game</button>
            <input type="number" id="scramble-count" placeholder="Scramble count" min="0" value="1">
        </div>
    </div>
    <script>
        const container = document.getElementById('grid-container');
        const message = document.getElementById('message');
        const newGameButton = document.getElementById('new-game-button');
        const scrambleCountInput = document.getElementById('scramble-count');
        const gridSize = 10;
        let tiles = [];

        function initializeTiles() {
            container.innerHTML = '';
for (let i = 0; i < gridSize; i++) {
tiles[i] = [];
for (let j = 0; j < gridSize; j++) {
const tile = document.createElement('div');
tile.className = 'tile green';
tile.onclick = () => toggleTiles(i, j);
tiles[i][j] = tile;
container.appendChild(tile);
}
}
}
    function scrambleTiles() {
        const count = parseInt(scrambleCountInput.value);
        for (let i = 0; i < count; i++) {
            const row = Math.floor(Math.random() * gridSize);
            const col = Math.floor(Math.random() * gridSize);
            toggleTiles(row, col);
        }
    }

    function toggleTiles(row, col) {
        for (let i = row - 1; i <= row + 1; i++) {
            for (let j = col - 1; j <= col + 1; j++) {
                if (i >= 0 && i < gridSize && j >= 0 && j < gridSize) {
                    tiles[i][j].classList.toggle('green');
                    tiles[i][j].classList.toggle('red');
                }
            }
        }
        checkWinCondition();
    }

    function checkWinCondition() {
        let allGreen = true;
        for (let i = 0; i < gridSize; i++) {
            for (let j = 0; j < gridSize; j++) {
                if (!tiles[i][j].classList.contains('green')) {
                    allGreen = false;
                    break;
                }
            }
            if (!allGreen) {
                break;
            }
        }
        if (allGreen) {
            message.style.display = 'block';
        } else {
            message.style.display = 'none';
        }
    }
    function newGame() {
        initializeTiles();
        scrambleTiles();
        message.style.display = 'none';
    }

    newGameButton.onclick = newGame;

    initializeTiles();
    scrambleTiles();
</script>
</body>
</html>
